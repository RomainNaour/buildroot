config BR2_PACKAGE_EFL
	bool "efl"
	depends on BR2_INSTALL_LIBSTDCPP
	depends on BR2_PACKAGE_HAS_UDEV # libudev
	# Eina library use mkstemps() in eina_file_common.c
	# mkstemps() is not available in uClibc/uClibc-ng
	depends on !BR2_TOOLCHAIN_USES_UCLIBC
	depends on BR2_USE_MMU
	select BR2_PACKAGE_DBUS
	select BR2_PACKAGE_FREETYPE
	select BR2_PACKAGE_JPEG # Emile needs libjpeg
	select BR2_PACKAGE_LIBCURL # eina_module, runtime dependency
	select BR2_PACKAGE_LUA # Evas lua 5.1 or 5.2
	select BR2_PACKAGE_LIBXKBCOMMON if BR2_PACKAGE_WAYLAND
	help
	  Enlightenment Foundation Libraries

	  https://enlightenment.org

if BR2_PACKAGE_EFL

config BR2_PACKAGE_EFL_RECOMMENDED_CONFIG
	bool "Use recommanded and tested configurations"
	select BR2_PACKAGE_BULLET
	select BR2_PACKAGE_FONTCONFIG
	select BR2_PACKAGE_GSTREAMER1
	select BR2_PACKAGE_GST1_PLUGINS_BASE
	select BR2_PACKAGE_LIBFRIBIDI
	select BR2_PACKAGE_LIBSNDFILE
	select BR2_PACKAGE_PULSEAUDIO
	select BR2_PACKAGE_UTIL_LINUX
	select BR2_PACKAGE_UTIL_LINUX_LIBBLKID
	select BR2_PACKAGE_UTIL_LINUX_LIBMOUNT
	default y
	help
	  Avoid to use untested or not recommanded configurations,
	  otherwise we need to add a very long and obscure option
	  to start the build.

comment "libecore video support"

config BR2_PACKAGE_EFL_FB
	bool "libecore framebuffer support"

config BR2_PACKAGE_EFL_SDL2
	bool "libevas SDL2 support"
	# SDL support is not available with OpenGLES.
	depends on !BR2_PACKAGE_EFL_X_XLIB_GLX_ES
	select BR2_PACKAGE_SDL2 # configure check for sdl2 headers

config BR2_PACKAGE_EFL_X
	bool "libecore X support"
	depends on BR2_PACKAGE_XORG7
	select BR2_PACKAGE_XLIB_LIBX11
	select BR2_PACKAGE_XLIB_LIBXEXT

if BR2_PACKAGE_EFL_X

choice
	prompt "select libecore XLIB/XCB support"

config BR2_PACKAGE_EFL_X_XLIB
	bool "libecore XLIB support"
	select BR2_PACKAGE_XLIB_LIBXCOMPOSITE
	select BR2_PACKAGE_XLIB_LIBXCURSOR
	select BR2_PACKAGE_XLIB_LIBXDAMAGE
	select BR2_PACKAGE_XLIB_LIBXINERAMA
	select BR2_PACKAGE_XLIB_LIBXP
	select BR2_PACKAGE_XLIB_LIBXRANDR
	select BR2_PACKAGE_XLIB_LIBXRENDER
	select BR2_PACKAGE_XLIB_LIBXSCRNSAVER
	select BR2_PACKAGE_XLIB_LIBXTST
	select BR2_PACKAGE_XPROTO_GLPROTO

config BR2_PACKAGE_EFL_X_XCB
	bool "libecore XCB support"
	depends on !BR2_PACKAGE_EFL_RECOMMENDED_CONFIG
	select BR2_PACKAGE_LIBXCB
	select BR2_PACKAGE_XCB_UTIL_IMAGE # xcb-image.pc
	select BR2_PACKAGE_XCB_UTIL_KEYSYMS # xcb-keysyms.pc
	select BR2_PACKAGE_XCB_UTIL_RENDERUTIL # xcb-renderutil.pc
	select BR2_PACKAGE_XCB_UTIL_WM # xcb-icccm.pc
	select BR2_PACKAGE_XLIB_LIBX11

comment "for libecore XCB support disable recommanded configurations"
	depends on BR2_PACKAGE_EFL_RECOMMENDED_CONFIG

endchoice

if BR2_PACKAGE_EFL_X_XLIB

choice
	prompt "select libevas OpenGL support"

config BR2_PACKAGE_EFL_X_XLIB_GLX_FULL
	bool "libevas OpenGL full support"
	depends on BR2_PACKAGE_HAS_LIBGL

comment "libevas OpenGLES support needs libgl"
	depends on !BR2_PACKAGE_HAS_LIBGL

config BR2_PACKAGE_EFL_X_XLIB_GLX_ES
	bool "libevas OpenGLES support"
	depends on BR2_PACKAGE_HAS_LIBGLES

comment "libevas OpenGLES support needs libgles"
	depends on !BR2_PACKAGE_HAS_LIBGLES

config BR2_PACKAGE_EFL_X_XLIB_GLX_NONE
	bool "libevas disable OpenGL support"

endchoice

endif # BR2_PACKAGE_EFL_X_XLIB

endif # BR2_PACKAGE_EFL_X

comment "libevas loaders"

config BR2_PACKAGE_EFL_PNG
	bool "libevas png loader"
	select BR2_PACKAGE_LIBPNG
	help
	  This enables the loader code that loads png files using
	  libpng.

config BR2_PACKAGE_EFL_JP2K
	bool "libevas jp2k loader"
	select BR2_PACKAGE_OPENJPEG
	help
	  This enables the loader code that loads jp2k files using
	  openjpeg.

config BR2_PACKAGE_EFL_JPEG
	bool "libevas jpeg loader"
	help
	  This enables the loader code that loads jpeg files using
	  libjpeg.

config BR2_PACKAGE_EFL_GIF
	bool "libevas gif loader"
	select BR2_PACKAGE_GIFLIB
	help
	  This enables the loader code that loads gif files using
	  libungif.

config BR2_PACKAGE_EFL_TIFF
	bool "libevas tiff loader"
	select BR2_PACKAGE_TIFF
	help
	  This enables the loader code that loads tiff files.

config BR2_PACKAGE_EFL_WEBP
	bool "libevas webp image loader"
	help
	  This enables the loader code that loads images using WebP.

endif # BR2_PACKAGE_EFL

comment "efl needs udev /dev management and a (e)glibc or musl toolchain w/ C++"
	depends on !BR2_PACKAGE_HAS_UDEV || !BR2_INSTALL_LIBSTDCPP || BR2_TOOLCHAIN_USES_UCLIBC
	depends on BR2_USE_MMU
